const scriptName = "ì§€ë¢°ì°¾ê¸°.js";
var blank="\u200b".repeat(501);
var Lbomb = [];
var Cbomb = 10;
var Hline0 = [];
var Hline1 = [];
var Hline2 = [];
var Hline3 = [];
var Hline4 = [];
var Hline5 = [];
var Hline6 = [];
var Hline7 = [];
var Hline8 = [];
var Hline9 = [];
var Hidden = [Hline0,Hline1,Hline2,Hline3,Hline4,Hline5,Hline6,Hline7,Hline8,Hline9];//íŒ
var Rsrd = [-1, -1, -1, 0, 0, 1, 1, 1];
var Lsrd = [-1, 0, 1, -1, 1, -1, 0, 1];
var shape = ["â¬œï¸","1ï¸âƒ£","2ï¸âƒ£","3ï¸âƒ£","4ï¸âƒ£","5ï¸âƒ£","6ï¸âƒ£","7ï¸âƒ£","8ï¸âƒ£"]; //ë‚˜íƒ€ë‚´ëŠ”ëª¨ì–‘
var blank_shape =["â¬›ï¸", "â¬›ï¸", "â¬›ï¸", "â¬›ï¸", "â¬›ï¸", "â¬›ï¸", "â¬›ï¸", "â¬›ï¸", "â¬›ï¸", "â¬›ï¸"];

var Pl=[];
var show = [];
Sline0 = blank_shape
Sline1 = blank_shape
Sline2 = blank_shape
Sline3 = blank_shape
Sline4 = blank_shape
Sline5 = blank_shape
Sline6 = blank_shape
Sline7 = blank_shape
Sline8 = blank_shape
Sline9 = blank_shape
var mt = [];
var ob = [];
var playing = 0;
var gameend = 0;
var no = [];
var player;

var guideLine = "    0   1   2   3  4  5   6   7  8  9"
function response(room, msg, sender, isGroupChat, replier, ImageDB, packageName, threadId) {
    if (msg == "/ì§€ë¢°ì°¾ê¸°") {
        if (playing == 0) {
            player = sender;
            playing=1;
            replier.reply("í•´ìƒë„ë‚˜ ì•ˆë“œë¡œì´ë“œ ë²„ì „, ì§€ì›í•˜ëŠ” ìœ ë‹ˆì½”ë“œì˜ ë²„ì „ì— ë”°ë¼ ì§€ë¢°ì°¾ê¸°íŒì´ ë‹¤ë¥´ê²Œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤");
            replier.reply("----ì§€ë¢°ì°¾ê¸° ë°©ë²•----"+blank+"\n\n//ê°„ë‹¨ ê·œì¹™ ì„¤ëª…//\n ì§€ë¢°ì°¾ê¸° ê²Œì„ì—ëŠ” 4 ì¢…ë¥˜ì˜ ë°•ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤.\n 1. ì•„ì§ ë­”ì§€ ëª¨ë¥´ëŠ” ë°•ìŠ¤ ğŸ”²\n 2. í­íƒ„ ë°•ìŠ¤ ğŸ’£\n 3. ì•„ë¬´ê²ƒë„ ì—†ëŠ” ë°•ìŠ¤ â¬œ\n 4. ì£¼ìœ„ì— í­íƒ„ì´ ìˆëŠ” ë°•ìŠ¤ 1ï¸âƒ£\n 5. ì²´í¬ëœ ë°•ìŠ¤ğŸš©\n\n ì¡°ì‹¬í•´ì•¼í•  ë°•ìŠ¤ëŠ” í­íƒ„ë°•ìŠ¤ ğŸ’£\n ìˆ«ìë°•ìŠ¤1ï¸âƒ£ì˜ ìˆ«ìì—ì„œ íŒíŠ¸ë¥¼ ì–»ì–´ í­íƒ„ë°•ìŠ¤ì˜ ìœ„ì¹˜ë¥¼ ë§ì¶¥ë‹ˆë‹¤.\n\n ìˆ«ìë°•ìŠ¤ëŠ” 1~8ê¹Œì§€ê°€ ìˆëŠ”ë° ì´ ìˆ«ìë“¤ì€ ë°•ìŠ¤ì£¼ìœ„ì— ì–¼ë§ˆë‚˜ ë§ì€ í­íƒ„ì´ ìˆëŠ”ì§€ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.\n\n//ëª…ë ¹ì–´//\n-ì¢Œí‘œì…ë ¥: ì„¸ë¡œ.ê°€ë¡œ \n  ì˜ˆë¥¼ ë“¤ì–´ ê°€ë¡œ 3, ì„¸ë¡œ 4ì˜ ë°•ìŠ¤ë¥¼ ì—´ê³  ì‹¶ìœ¼ë©´ 4.3\n\n-ì¤‘ê°„ì— í¬ê¸°í•˜ê³  ì‹¶ì„ ë•: /í¬ê¸°\n\n-í•œë²ˆì— í•œì‚¬ëŒë§Œ ê°€ëŠ¥\n\n-ê¹ƒë°œ: ì„¸ë¡œ!ê°€ë¡œ\ní­íƒ„ìœ„ì¹˜ë¥¼ ì²´í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nê°™ì€ ê³³ì„ ë‘ë²ˆ ì²´í¬í•˜ë©´ ê¹ƒë°œì´ ì‚¬ë¼ì§‘ë‹ˆë‹¤\nê¹ƒë°œì´ í‘œì‹œëœ ê³³ì€ ì—´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.(ì§€ìš°ë©´ ì—´ ìˆ˜ ìˆìŒ)")
   replier.reply("í­íƒ„ê°œìˆ˜: "+Cbomb);

            

            //í­íƒ„ì¢Œí‘œ
            for (var i = 1; i <= Cbomb;) {
                var Rrow = Math.floor(Math.random() * 10); //0-9
                var Rline = Math.floor(Math.random() * 10); //ì¤‘ë³µë  ìš°ë ¤ìˆìŒ
                var Lb = (Rrow + "" + Rline);
                if (Lbomb.indexOf(Lb) == -1) {
                    Lbomb.push(Lb);
                    i++;
                }
            }

            //íŒë§Œë“¤ê¸°
        for (i = 0; i <= 9; i ++) { // 10ì¤„ ëª¨ë‘ ë§Œë“¤ê¸°
    var R = i; // í–‰ì¢Œí‘œ(0ë¶€í„° 9ê¹Œì§€)
    var L = 0; // ì—´ì¢Œí‘œ
    for (var ii = 0; ii <= 9; ii++) { // í•œì¤„ì˜ 10ì¹¸
        L = ii; //ì—´ì¢Œí‘œ
        var SrdBomb = 0; //ì£¼ìœ„ í­íƒ„ê°œìˆ˜
        for (var iii = 0; iii <= 8; iii++) { // ì£¼ìœ„ë°•ìŠ¤ê²€ì‚¬
            r = R + Number(Rsrd[iii]); //ì£¼ìœ„ ë°•ìŠ¤ í–‰ì¢Œí‘œ
            l = L + Number(Lsrd[iii]); //ì£¼ìœ„ ë°•ìŠ¤ ì—´ì¢Œí‘œ
            if (Lbomb.indexOf(r + "" + l) != -1) {//ë§Œì•½ [í­íƒ„ìœ„ì¹˜]ì— ì£¼ìœ„ë°•ìŠ¤ ì¢Œí‘œê°€ í¬í•¨ë˜ë©´
                SrdBomb++; //ì£¼ìœ„ í­íƒ„ê°œìˆ˜ + 1
            }
        }
        if (Lbomb.indexOf(R + "" + L) != -1) {//ë§Œì•½ ë°•ìŠ¤ ì¢Œí‘œê°€ í­íƒ„ì¢Œí‘œì™€ ê°™ë‹¤ë©´
            Hidden[R].push("ğŸ’£"); //í­íƒ„ëª¨ì–‘
        } else {//ì•„ë‹ˆë©´
            Hidden[R].push(shape[SrdBomb]);//ë¹ˆë°•ìŠ¤ í˜¹ì€ ìˆ«ì
            if(SrdBomb == 0){ //ë§Œì•½ ë¹ˆë°•ìŠ¤ì´ë©´
              mt.push(R + "" + L); //[ë¹ˆë°•ìŠ¤] ì¶”ê°€
            }
        }
    }
}
            //íŒëª¨ìœ¼ê¸°
            Hidden = [Hline0, Hline1, Hline2, Hline3, Hline4, Hline5, Hline6, Hline7, Hline8, Hline9];
            
            show = [guideLine, "0 "+Sline0, "1 "+Sline1, "2 "+Sline2, "3 "+Sline3, "4 "+Sline4, "5 "+Sline5,"6 "+Sline6, "7 "+Sline7, "8 "+Sline8, "9 "+Sline9];
                
            
            replier.reply(show.join("\n").replace(/,/g,''));
       
        }
        else{
            replier.reply(player+"ë‹˜ì´ ê²Œì„ì¤‘ì´ì—ìš”.");
        }




    }



    if (playing == 1&&sender==player) {

if(msg.indexOf("!") !=-1){
R = msg.split("!")[0].trim(); //í–‰ì¢Œí‘œ
L = msg.split("!")[1].trim(); //ì—´ì¢Œí‘œ
if(Pl.indexOf(R + "" + L)!=-1){

replier.reply(Pl.filter(function(element){ element!=(R + "" + L)}))
Pl=Pl.filter((element)=>element!=(R + "" + L))
replier.reply("ì²´í¬ ì·¨ì†Œ")
}

else if(ob.indexOf(R + "" + L)==-1){
Pl.push(R + "" + L);
replier.reply("ì²´í¬ ì™„ë£Œ")
}
else{
replier.reply("ì—´ë ¤ìˆëŠ” ë°•ìŠ¤")
}
Sline0 = [];
            Sline1 = [];
            Sline2 = [];
            Sline3 = [];
            Sline4 = [];
            Sline5 = [];
            Sline6 = [];
            Sline7 = [];
            Sline8 = [];
            Sline9 = [];
            var show0=[Sline0,Sline1,Sline2,Sline3,Sline4,Sline5,Sline6,Sline7,Sline8,Sline9];
            no = [];
           
            for(i=0;i<=9;i++){
            for (ii = 0; ii <= 9; ii++) { //í•œì¤„ 10ì¹¸
                if (ob.indexOf(i +""+ ii) != -1) { //ë§Œì•½ ì—´ë¦°ë°•ìŠ¤ ë°°ì—´ì— í¬í•¨ë˜ë©´  
                    var hd=Hidden[i];
                    show0[i].push(hd[ii]); //ëª¨ì–‘ì •í•˜ê¸°
                } 
else if(Pl.indexOf(i +""+ ii) != -1){
show0[i].push("ğŸš©");
}

else {//ì•„ë‹ˆë©´
                    show0[i].push("â¬›ï¸"); //ì—´ë¦¬ì§€ ì•Šì€ ë°•ìŠ¤
                    no.push("0"); //ì—´ë¦¬ì§€ ì•Šì€ ë°•ìŠ¤ +1
                }
            }
            }

           
                show = [ guideLine, "0 "+Sline0, "1 "+Sline1, "2 "+Sline2, "3 "+Sline3, "4 "+Sline4, "5 "+Sline5,"6 "+Sline6, "7 "+Sline7, "8 "+Sline8, "9 "+Sline9];
                replier.reply(show.join("\n").replace(/,/g,''));
            

}
        //í¬ê¸°
        if (msg == "/í¬ê¸°") {
            replier.reply("ì•„ì‰½ë„¤ìš”ã… ã…  ê²Œì„ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.")
            replier.reply(Hidden.join("\n").replace(/,/g,''));
            Api.compile(scriptName);
        }

        //ì¹¸ì—´ê¸°
  //ì¹¸ì—´ê¸°
        if (msg.indexOf(".") !=-1) { // í–‰ì¢Œí‘œ.ì—´ì¢Œí‘œ
            R = msg.split(".")[0].trim(); //í–‰ì¢Œí‘œ
            L = msg.split(".")[1].trim(); //ì—´ì¢Œí‘œ
if(Pl.indexOf(R + "" + L)!=-1){
replier.reply("ì²´í¬ëœ ë°•ìŠ¤");
}
else{
            var mts = [R + "" + L] //ì£¼ë³€ 8ì¹¸ì„ í™•ì¸í•  ë¹ˆì¹¸
            var mtm = []; //mtsì˜ ì£¼ìœ„ 8ì¹¸ ì¤‘ ë¹ˆì¹¸ì¸ ë°•ìŠ¤
            var mtc = []; //í™•ì¸ì„ ë‹¤ í•˜ê³  ë” ì´ìƒ ê²€ì‚¬ê°€ í•„ìš”ì—†ëŠ” ë¹ˆì¹¸ë“¤
            var Rr; //í™•ì¸í•  í–‰ì¢Œí‘œ ë³€ìˆ˜
            var Ll; //í™•ì¸í•  ì—´ì¢Œí‘œ ë³€ìˆ˜
            var Rrr; //ì£¼ìœ„ 8ì¹¸ í–‰ì¢Œí‘œ ë³€ìˆ˜
            var Lll; //ì£¼ìœ„ 8ì¹¸ ì—´ì¢Œí‘œ ë³€ìˆ˜
            var cmt;//ì£¼ë³€ 8ì¹¸ì„ í™•ì¸í•  ë¹ˆì¹¸ ê°œìˆ˜
            if (ob.indexOf(R + "" + L) == -1) { //ë§Œì•½ ì…ë ¥í•œ ì¢Œí‘œê°€ ì—´ë¦° ë°•ìŠ¤ì— í¬í•¨ë˜ì§€ ì•Šì•˜ë‹¤ë©´
                if (Lbomb.indexOf(R + "" + L) != -1) { //ì…ë ¥í•œ ì¢Œí‘œê°€ í­íƒ„ì¢Œí‘œë¼ë©´
                    replier.reply("ì§€ë¢°ë¥¼ ë°Ÿì•˜ì–´ìš”! ëª¸ì´ ì‚°ì‚°ì¡°ê°ë‚˜ê² ë„¤ìš”.");
                    Api.compile(scriptName); //ì»´íŒŒì¼ (ì´ˆê¸°í™”)
                    ob.push(R + "" + L); //ì—´ë¦° ë°•ìŠ¤ ë°°ì—´ì— ì¶”ê°€
                } else if (mt.indexOf(R + "" + L) == -1) { // ë§Œì•½ ì…ë ¥í•œ ì¢Œí‘œê°€ ë¹ˆì¹¸ ë°°ì—´ì— ì—†ë‹¤ë©´
                    ob.push(R + "" + L); //ì—´ë¦° ë°•ìŠ¤ ë°°ì—´ì— ì¶”ê°€
                } else if (mt.indexOf(R + "" + L) != -1) { //ì•„ë‹ˆë¼ ë§Œì•½ ì…ë ¥í•œ ì¢Œí‘œê°€ ë¹ˆì¹¸ë°°ì—´ì— í¬í•¨ëœë‹¤ë©´ 
                       ob.push(R+""+L);

                    for (; mts.length >= 1;) { //í™•ì¸í•  ë¹ˆì¹¸ì´ ì—†ì„ë•Œ ê¹Œì§€ 
                        cmt = mts.length - 1; //í™•ì¸í• ë¹ˆì¹¸ê³„ìˆ˜-1
                        for (i = 0; i <= cmt; i++) { //í™•ì¸í• ë¹ˆì¹¸ìˆ˜ë§Œí¼ ë°˜ë³µ
                            Rr = Number(mts[0].split("")[0]); //í™•ì¸í•  ë¹ˆì¹¸ ì—´ì¢Œí‘œ
                            Ll = Number(mts[0].split("")[1]); //í™•ì¸í•  ì—´ì¢Œí‘œ ë³€ìˆ˜

                            for (ii = 0; ii <= 7; ii++) { //í™•ì¸í•œë¹ˆì¹¸ìˆœì„œëŒ€ë¡œì£¼ìœ„8ì¹¸í™•ì¸
                                Rrr = Rr + Rsrd[ii]; //ì£¼ìœ„ 8ì¹¸
                                Lll = Ll + Lsrd[ii]; //ì£¼ìœ„ 8ì¹¸
                                if (mtc.indexOf(Rrr + "" + Lll) == -1 && mtm.indexOf(Rrr + "" + Lll) == -1 && mts.indexOf(Rrr + "" + Lll) == -1 && ob.indexOf(Rrr + "" + Lll) == -1){ //ì¤‘ë³µì œê±°
                                    if (mt.indexOf(Rrr + "" + Lll) != -1) { //ë¹ˆì¹¸ë°°ì—´ì—í¬í•¨ë˜ë©´
                                        mtm.push(Rrr + "" + Lll); //ì£¼ìœ„ë¹ˆì¹¸

                                    }
                                }

                            }
                            mtc.push(mts[0]); //í™•ì¸ëœ ë¹ˆì¹¸ì— ë„£ê¸°
                            mts.shift(); //í™•ì¸ëœ ë¹ˆì¹¸ì— ë„£ê³  ì‚­ì œ
                        }
                        mts = mtm; //ë¹ˆì¹¸ì£¼ìœ„ë¹ˆì¹¸ì„ í™•ì¸í•  ë¹ˆì¹¸ì— ë„£ê¸°
                        mtm = []; //ì´ˆê¸°í™”
                    }
                    for (; mtc.length >= 1;) { //í•œì¤„ ì •ë¦¬
                        Rr = Number(mtc[0].split("")[0]); //í™•ì¸ëœ ë¹ˆì¹¸
                        Ll = Number(mtc[0].split("")[1]); //í™•ì¸ëœ ë¹ˆì¹¸
                        for (ii = 0; ii <= 7; ii++) { //ì£¼ìœ„8ì¹¸
                            Rrr = Rr + Rsrd[ii]; //ì£¼ìœ„ë¹ˆì¹¸
                            Lll = Ll + Lsrd[ii]; //ì£¼ìœ„ë¹ˆì¹¸
                            if (ob.indexOf(Rrr + "" + Lll) == -1) { //ë§Œì•½ ì—´ë¦°ì¹¸ì— ì—†ìœ¼ë©´
                                ob.push(Rrr + "" + Lll); //ì—´ë¦°ì¹¸ë°°ì—´ì— í¬í•¨
                            }


                        }
                        mtc.shift(); //í™•ì¸ëœ ë¹ˆì¹¸ ë§¨ì• ì‚­ì œ
                    }
                }

            } else {
                replier.reply("ì´ë¯¸ ì˜¤í”ˆí•œ ë°•ìŠ¤");
            }
            }

            Sline0 = [];
            Sline1 = [];
            Sline2 = [];
            Sline3 = [];
            Sline4 = [];
            Sline5 = [];
            Sline6 = [];
            Sline7 = [];
            Sline8 = [];
            Sline9 = [];
            var show0=[Sline0,Sline1,Sline2,Sline3,Sline4,Sline5,Sline6,Sline7,Sline8,Sline9];
            no = [];
           
            for(i=0;i<=9;i++){
            for (ii = 0; ii <= 9; ii++) { //í•œì¤„ 10ì¹¸
                if (ob.indexOf(i +""+ ii) != -1) { //ë§Œì•½ ì—´ë¦°ë°•ìŠ¤ ë°°ì—´ì— í¬í•¨ë˜ë©´  
                    var hd=Hidden[i];
                    show0[i].push(hd[ii]); //ëª¨ì–‘ì •í•˜ê¸°
                } 
else if(Pl.indexOf(i +""+ ii) != -1){
show0[i].push("ğŸš©");
no.push("0");
}

else {//ì•„ë‹ˆë©´
                    show0[i].push("â¬›ï¸"); //ì—´ë¦¬ì§€ ì•Šì€ ë°•ìŠ¤
                    no.push("0"); //ì—´ë¦¬ì§€ ì•Šì€ ë°•ìŠ¤ +1
                }
            }
            }

            if (no.length != Cbomb) { //ê²Œì„ê³„ì†
                show = [guideLine, "0 "+Sline0, "1 "+Sline1, "2 "+Sline2, "3 "+Sline3, "4 "+Sline4, "5 "+Sline5,"6 "+Sline6, "7 "+Sline7, "8 "+Sline8, "9 "+Sline9];
                replier.reply(show.join("\n").replace(/,/g,''));
            } else if (no.length == Cbomb) {//ê²Œì„ì¢…ë£Œ ìŠ¹ë¦¬
                replier.reply("ì„±ê³µì´ë„¤ìš”! ì¶•í•˜í•´ìš”");
                show = [guideLine, "0 "+Sline0, "1 "+Sline1, "2 "+Sline2, "3 "+Sline3, "4 "+Sline4, "5 "+Sline5,"6 "+Sline6, "7 "+Sline7, "8 "+Sline8, "9 "+Sline9];
                replier.reply(show.join("\n").replace(/,/g,''));
                Api.compile(scriptName);
                gameend = 1;
            }


        }

    }


    //ë


}
